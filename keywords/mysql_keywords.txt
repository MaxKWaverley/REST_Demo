*** Settings ***

Documentation  This file represents high-level keywords for MySQL
Resource  ../libs.txt


*** Keywords ***

Connect MySQL for MyLogistic
  [Documentation]  Connects to MySQL DB with special parameters
  Connect To Database Using Custom Params  pymysql  db='mylogistic', user='root', host='${MYSQL_IP}', port=${MYSQL_PORT}

Get id for current package
  [Documentation]  Takes package number for already created package and return its id number
  [Arguments]  ${package_number}
  ${res}=  Query  select id from package_package where number='${package_number}';
  [Return]  ${res}
  
Set "In Transit" state for package 
  [Documentation]  This Test Case Set "In Transit" state for package in MySQL
  [Arguments]  ${ID}
  Execute Sql String  update package_package set number=990728071, is_pickedup=1 where id=${ID[0][0]};
  
Set "Delivered" state for package 
  [Documentation]  This Test Case Set "Delivered" state for package in MySQL
  [Arguments]  ${ID}
  Execute Sql String  update package_package set number="1Z12345E0291980793", last_tracking_time=Null where id=${ID[0][0]};

Set "ORIGIN SCAN" state for package 
  [Documentation]  This Test Case Set "ORIGIN SCAN" state for package in MySQL
  [Arguments]  ${ID}
  Execute Sql String  update package_package set number="1Z12345E1392654435", last_tracking_time=Null where id=${ID[0][0]};
  
Set "2nd Delivery attempt" state for package 
  [Documentation]  This Test Case Set "2nd Delivery attempt" state for package in MySQL
  [Arguments]  ${ID}
  Execute Sql String  update package_package set number="1Z12345E6892410845", last_tracking_time=Null where id=${ID[0][0]};

Activate payment by Invoice option for selected user with required amount
  [Documentation]  This Test Case enable payment by Invoice option for selected user with required amount of invoice in MySQL
  [Arguments]  ${invoice_amount}
  Execute Sql String  update profile_userprofile set invoice_payment_limit=1001, can_use_invoice=1 where username="${TEST_EMAIL}";

Set IS_PAID for Invoice order
  [Documentation]  This Test Set IS_PAID for Invoice order in MySQL
  Execute Sql String  update order_order set is_paid=1 where pay_with_invoice=1;
  
Get default discount price for 
  [Documentation]  Takes Package Size, Service Code, Customer Condition and Zone and return default discount price for such package
  [Arguments]  ${zone_number}  ${package_size}  ${service_code}  ${customer_condition}  
  ${price}=  Query  select discount_price from price_defaultdiscountprice where condition_id=${customer_condition} and service_code=${service_code} and zone=${zone_number} and size_id=${package_size};
  [Return]  ${price}
  